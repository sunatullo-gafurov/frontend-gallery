(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{19:function(e,t,a){e.exports=a.p+"static/media/pngtree.abf1a95f.jpg"},26:function(e,t,a){},41:function(e,t,a){e.exports=a(70)},50:function(e,t,a){},70:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(17),l=a.n(c),s=a(3),o=a(8),u=a(36),m=a(40),i=a(1),E={files:[],message:null,loading:!1,error:null},p=Object(o.c)({list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_FILES_REQUEST":return Object(i.a)({},e,{loading:!0,error:null});case"FETCH_FILES_SUCCESS":var a=t.payload.files;return Object(i.a)({},e,{files:a,loading:!1,error:null});case"FETCH_FILES_ERROR":var r=t.payload.error;return Object(i.a)({},e,{loading:!1,error:r});case"FILE_UPLOAD_REQUEST":return Object(i.a)({},e,{loading:!0,error:null});case"FILE_UPLOAD_SUCCESS":var n=t.payload.file;return Object(i.a)({},e,{files:[n].concat(Object(m.a)(e.files)),loading:!1,error:null});case"FILE_UPLOAD_ERROR":var c=t.payload.error;return Object(i.a)({},e,{loading:!1,error:c});case"FILE_REMOVE_REQUEST":return Object(i.a)({},e,{loading:!0,error:null});case"FILE_REMOVE_SUCCESS":var l=t.payload,s=l.existent,o=l.message;return Object(i.a)({},e,{files:e.files.filter((function(e){return e!==s})),message:o,loading:!1,error:null});case"DISMISS_FETCH_ERROR_MESSAGE":return Object(i.a)({},e,{loading:!1,error:null});case"DISMISS_REMOVE_MESSAGE":return Object(i.a)({},e,{message:null,loading:!1,error:null});default:return e}}}),d=a(15),f=function(e){localStorage.setItem("token",e)},S=function(e){localStorage.setItem("user",JSON.stringify(e))},b={token:localStorage.getItem("token"),user:function(){try{var e=localStorage.getItem("user");return null===e?null:JSON.parse(e)}catch(t){return null}}(),message:null,authenticate:{email:"",password:""},loading:!1,error:null},R=Object(o.c)({list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_LOGIN_FIELD_CHANGE":var a=t.payload,r=a.name,n=a.value;return Object(i.a)({},e,{authenticate:Object(i.a)({},e.authenticate,Object(d.a)({},r,n))});case"USER_WITH_TOKEN":var c=t.payload,l=c.token,s=c.user,o=c.message;return Object(i.a)({},e,{token:l,user:s,message:o,loading:!1,error:null});case"DISMISS_REGISTER_MESSAGE":return Object(i.a)({},e,{message:null,loading:!1});case"DISMISS_LOGIN_MESSAGE":case"DISMISS_LOGIN_SERVER_ERROR_MESSAGE":return Object(i.a)({},e,{loading:!1,error:null});case"LOGIN_REQUEST":return Object(i.a)({},e,{loading:!0,error:null});case"LOGIN_SUCCESS":var u=t.payload,m=u.token,E=u.user,p=u.message;return Object(i.a)({},e,{token:m,user:E,message:p,loading:!1,error:null});case"LOGIN_ERROR":var f=t.payload.error;return Object(i.a)({},e,{loading:!1,error:f});case"USER_LOGOUT":return Object(i.a)({},b,{token:null,user:null});default:return e}}}),g={user:{fname:"",lname:"",email:"",password:"",password2:""},loading:!1,error:null},O=Object(o.c)({current:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"USER_REGISTER_FIELD_CHANGE":var a=t.payload,r=a.name,n=a.value;return Object(i.a)({},e,{user:Object(i.a)({},e.user,Object(d.a)({},r,n))});case"PASSWORD_MATCH_ERROR":return Object(i.a)({},e,{error:t.payload});case"USER_REGISTER_REQUEST":return Object(i.a)({},e,{loading:!0,error:null});case"USER_REGISTER_SUCCESS":return Object(i.a)({},e,{loading:!1,error:null});case"USER_REGISTER_ERROR":return Object(i.a)({},e,{loading:!1,error:t.payload.error});case"DISMISS_PASSWORD_MESSAGE":case"DISMISS_EMAIL_MESSAGE":case"DISMISS_SERVER_ERROR_MESSAGE":return Object(i.a)({},e,{loading:!1,error:null});default:return e}}}),_=Object(o.c)({users:O,files:p,auth:R}),y=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,v=Object(o.e)(_,y(Object(o.a)(u.a))),h=(a(26),a(50),a(7)),N=a(19),I=a.n(N),w=function(){return n.a.createElement("div",{className:"row mt-5"},n.a.createElement("div",{className:"col-md-6 m-auto"},n.a.createElement("div",{className:"card card-body text-center"},n.a.createElement("img",{className:"w-25 mx-auto",src:I.a,alt:""}),n.a.createElement("h1",null,"My Gallery"),n.a.createElement("p",null,"Create an account or login"),n.a.createElement(h.b,{to:"/register",className:"btn btn-primary btn-block mb-2"},"Register"),n.a.createElement(h.b,{to:"/login",className:"btn btn-success btn-block"},"Login"))))},k=a(13),j=a(4),C=a.n(j),L=a(12),x=a(38),M=a.n(x).a.create({baseURL:"https://backend-gallery.herokuapp.com/api"});M.interceptors.request.use((function(e){var t=v.getState().auth.list.token;return null!==t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){return Promise.reject(e)})),M.interceptors.response.use((function(e){return e}),(function(e){return e&&401===e.response.status&&P()(v.dispatch),Promise.reject(e)}));var A=M,U=function(e){return{type:"USER_REGISTER_ERROR",payload:{error:e}}},G=function(e,t,a){return{type:"USER_WITH_TOKEN",payload:{token:e,user:t,message:a}}},F=function(e){return function(){var t=Object(L.a)(C.a.mark((function t(a){var r,n,c,l,s;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"USER_REGISTER_REQUEST"}),t.prev=1,t.next=4,A.post("/register",{user:e});case 4:if(r=t.sent,"ERROR"!==(n=r.data).type){t.next=11;break}return a(U({message:n.message,type:"EMAIL"})),t.abrupt("return");case 11:return c=n.token,l=n.user,s=n.message,f(c),S(l),a(G(c,l,s)),a({type:"USER_REGISTER_SUCCESS"}),t.abrupt("return");case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(1),a(U({message:t.t0.message,type:"SERVER_ERROR"}));case 22:case"end":return t.stop()}}),t,null,[[1,19]])})));return function(e){return t.apply(this,arguments)}}()},T=function(e,t,a){return{type:"LOGIN_SUCCESS",payload:{token:e,user:t,message:a}}},D=function(e){return{type:"LOGIN_ERROR",payload:{error:e}}},P=function(){return function(){var e=Object(L.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:localStorage.clear(),t({type:"USER_LOGOUT"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},H=function(){return function(){var e=Object(L.a)(C.a.mark((function e(t,a){var r,n,c,l,s,o,u;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a().users.current.error,n=a().auth.list,c=n.message,l=n.error,s=a().files.list,o=s.message,u=s.error,!c){e.next=6;break}return t({type:"DISMISS_REGISTER_MESSAGE"}),e.abrupt("return");case 6:if(!o){e.next=9;break}return t({type:"DISMISS_REMOVE_MESSAGE"}),e.abrupt("return");case 9:if(!l||"ERROR"!==l.type){e.next=12;break}return t({type:"DISMISS_LOGIN_MESSAGE"}),e.abrupt("return");case 12:if(l&&"SERVER_ERROR"===l.type&&t({type:"DISMISS_LOGIN_SERVER_ERROR_MESSAGE"}),u&&t({type:"DISMISS_FETCH_ERROR_MESSAGE"}),!r||"PASSWORD"!==r.type){e.next=17;break}return t({type:"DISMISS_PASSWORD_MESSAGE"}),e.abrupt("return");case 17:if(!r||"SERVER_ERROR"!==r.type){e.next=20;break}return t({type:"DISMISS_SERVER_ERROR_MESSAGE"}),e.abrupt("return");case 20:if(!r||"EMAIL"!==r.type){e.next=23;break}return t({type:"DISMISS_EMAIL_MESSAGE"}),e.abrupt("return");case 23:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},V=function(e){return{type:"FILE_UPLOAD_SUCCESS",payload:{file:e}}},Q=function(e,t){return{type:"FILE_REMOVE_SUCCESS",payload:{existent:e,message:t}}},W=function(){return n.a.createElement("div",{className:"d-flex justify-content-center loading"},n.a.createElement("div",{className:"spinner-border text-primary loader",role:"status"},n.a.createElement("span",{className:"sr-only"},"Loading...")))},q=function(){var e=Object(s.c)((function(e){return e.users.current})),t=e.user,a=t.fname,c=t.lname,l=t.email,o=t.password,u=e.loading,m=e.error,i=Object(s.b)(),E=Object(r.useRef)(null);Object(r.useEffect)((function(){m&&"EMAIL"===m.type&&E.current.focus()}),[m]);var p={fname:a,lname:c,email:l,password:o},d=function(e){var t=e.target,a=t.name,r=t.value;i(function(e,t){return{type:"USER_REGISTER_FIELD_CHANGE",payload:{name:e,value:t}}}(a,r))},f=function(){i(H())};return n.a.createElement("div",{className:"row mt-5"},n.a.createElement("div",{className:"col-md-6 m-auto"},n.a.createElement("div",{className:"card card-body"},n.a.createElement("h1",{className:"text-center mb-3"},n.a.createElement("i",{className:"fas fa-user-plus"})," Register"),n.a.createElement("form",{onSubmit:function(e){var t;e.preventDefault(),i((t=p,function(){var e=Object(L.a)(C.a.mark((function e(a,r){var n,c,l;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r().users.current.user,c=n.password,l=n.password2,c===l){e.next=4;break}return a({type:"PASSWORD_MATCH_ERROR",payload:{message:"Passwords do not match",type:"PASSWORD"}}),e.abrupt("return");case 4:if(c!==l){e.next=7;break}return a(F(t)),e.abrupt("return");case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()))}},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"fname"},"First Name"),n.a.createElement("input",{type:"text",id:"fname",name:"fname",className:"form-control",placeholder:"Enter your first name",onChange:d,required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"lname"},"Last Name"),n.a.createElement("input",{type:"text",id:"lname",name:"lname",className:"form-control",placeholder:"Enter your last name",onChange:d,required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"email"},"Email"),m&&"EMAIL"===m.type&&n.a.createElement("div",{className:"alert alert-warning"},n.a.createElement("span",null,m.message),n.a.createElement("button",{onClick:f,type:"button",className:"close"},n.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),n.a.createElement("input",{type:"email",id:"email",name:"email",className:"form-control",placeholder:"Enter Email",onChange:d,required:!0,ref:E})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("input",{type:"password",id:"password",name:"password",className:"form-control",placeholder:"Create Password",onChange:d,required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"password2"},"Confirm Password"),m&&"PASSWORD"===m.type&&n.a.createElement("div",{className:"alert alert-warning"},n.a.createElement("span",null,m.message),n.a.createElement("button",{onClick:f,type:"button",className:"close"},n.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),n.a.createElement("input",{type:"password",id:"password2",name:"password2",className:"form-control",placeholder:"Confirm Password",onChange:d,required:!0})),m&&"SERVER_ERROR"===m.type&&n.a.createElement("div",{className:"alert alert-warning"},n.a.createElement("span",null,m.message),n.a.createElement("button",{onClick:f,type:"button",className:"close"},n.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),n.a.createElement("button",{type:"submit",className:"btn btn-primary btn-block"},"Register")),n.a.createElement("p",{className:"lead mt-4"},"Have An Account? ",n.a.createElement(h.b,{to:"/login"},"Login")))),u&&n.a.createElement(W,null))},B=function(){var e=Object(s.c)((function(e){return e.auth.list})),t=e.loading,a=e.error,r=Object(s.b)(),c=function(e){var t=e.target,a=t.name,n=t.value;r(function(e,t){return{type:"USER_LOGIN_FIELD_CHANGE",payload:{name:e,value:t}}}(a,n))},l=function(){r(H())};return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"row mt-5"},n.a.createElement("div",{className:"col-md-6 m-auto"},n.a.createElement("div",{className:"card card-body"},n.a.createElement("img",{className:"w-25 mx-auto",src:I.a,alt:""}),n.a.createElement("h1",{className:"text-center mb-3"},n.a.createElement("i",{className:"fas fa-sign-in-alt"}),"  Login"),n.a.createElement("form",{onSubmit:function(e){e.preventDefault(),r(function(){var e=Object(L.a)(C.a.mark((function e(t,a){var r,n,c,l,s,o,u,m;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a().auth.list.authenticate,n=r.email,c=r.password,t({type:"LOGIN_REQUEST"}),e.prev=2,e.next=5,A.post("/login",{email:n,password:c});case 5:if(l=e.sent,"ERROR"!==(s=l.data).type){e.next=10;break}return t(D(s)),e.abrupt("return");case 10:if("SUCCESS"!==s.type){e.next=16;break}return o=s.token,u=s.user,m=s.message,f(o),S(u),t(T(o,u,m)),e.abrupt("return");case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),t(D({message:e.t0.message,type:"SERVER_ERROR"}));case 21:case"end":return e.stop()}}),e,null,[[2,18]])})));return function(t,a){return e.apply(this,arguments)}}())}},a&&"ERROR"===a.type&&n.a.createElement("div",{className:"alert alert-warning"},n.a.createElement("span",null,a.message),n.a.createElement("button",{onClick:l,type:"button",className:"close"},n.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"email"},"Email"),n.a.createElement("input",{type:"email",id:"email",name:"email",className:"form-control",placeholder:"Enter Email",onChange:c,required:!0})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"password"},"Password"),n.a.createElement("input",{type:"password",id:"password",name:"password",className:"form-control",placeholder:"Enter Password",onChange:c,required:!0})),a&&"SERVER_ERROR"===a.type&&n.a.createElement("div",{className:"alert alert-warning"},n.a.createElement("span",null,a.message),n.a.createElement("button",{onClick:l,type:"button",className:"close"},n.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),n.a.createElement("button",{type:"submit",className:"btn btn-success btn-block"},"Login")),n.a.createElement("p",{className:"lead mt-4"},"No Account? ",n.a.createElement(h.b,{to:"/register"},"Register")))),t&&n.a.createElement(W,null)))},J=function(e){var t=e.path,a=e.component;return null===Object(s.c)((function(e){return e.auth.list})).token?n.a.createElement(k.a,{to:"/"}):n.a.createElement(k.b,{exact:!0,path:t,component:a})},K=a(39),X=function(e){var t=e.id,a=e.ownerId,r=e.filename,c=Object(s.b)();return n.a.createElement("div",{className:"BlockTwo"},n.a.createElement("div",{className:""},n.a.createElement("button",{onClick:function(){c(function(e,t){return function(){var a=Object(L.a)(C.a.mark((function a(r,n){var c,l,s,o;return C.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return c=n().files.list.files,l=c.find((function(a){return a.id===e&&a.ownerId&&t})),r({type:"FILE_REMOVE_REQUEST"}),a.prev=3,a.next=6,A.delete("/file/".concat(e));case 6:s=a.sent,o=s.data.message,r(Q(l,o)),a.next=14;break;case 11:a.prev=11,a.t0=a.catch(3),r({type:"FILE_REMOVE_ERROR",payload:{error:a.t0}});case 14:case"end":return a.stop()}}),a,null,[[3,11]])})));return function(e,t){return a.apply(this,arguments)}}()}(t,a))},type:"button",className:"CloseBlock"},n.a.createElement("span",{"aria-hidden":"true"},n.a.createElement("i",{className:"far fa-times-circle"}))),n.a.createElement("img",{className:"img-fluid img-thumbnail",src:"".concat("https://backend-gallery.herokuapp.com/static","/").concat(r),alt:""})))},z=function(){var e=Object(s.c)((function(e){return e.files.list})).files;return n.a.createElement(n.a.Fragment,null,e.map((function(e){return n.a.createElement(X,Object.assign({key:e.id},e))})))},Y=function(){var e=Object(s.c)((function(e){return e.auth.list})),t=e.message,a=e.user,c=a.fname,l=a.lname,o=Object(s.c)((function(e){return e.files.list})),u=o.message,m=o.loading,i=o.error,E=Object(s.b)(),p=Object(r.useRef)(null);Object(r.useEffect)((function(){E(function(){var e=Object(L.a)(C.a.mark((function e(t){var a,r;return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"FETCH_FILES_REQUEST"}),e.prev=1,e.next=4,A.get("/files");case 4:a=e.sent,r=a.data,t({type:"FETCH_FILES_SUCCESS",payload:{files:r}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:"FETCH_FILES_ERROR",payload:{error:e.t0}});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}())}),[E]);var d=function(){E(H())};return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:"d-flex"},n.a.createElement("div",{className:"col-md-6 m-auto"},t&&n.a.createElement("div",{className:"mt-2 p-1 alert alert-success text-center"},n.a.createElement("span",null,t),n.a.createElement("button",{onClick:d,type:"button",className:"close"},n.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),u&&n.a.createElement("div",{className:"mt-2 p-1 alert alert-success text-center"},n.a.createElement("span",null,u),n.a.createElement("button",{onClick:d,type:"button",className:"close"},n.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),n.a.createElement("h3",{className:"text-muted"},"Welcome ",c," ",l," "),i&&n.a.createElement("div",{className:"alert alert-warning"},n.a.createElement("span",null,i.message),n.a.createElement("button",{onClick:d,type:"button",className:"close"},n.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),n.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=Array.from(p.current.files),a=Object(K.a)(t,1)[0];E(function(e){return function(){var t=Object(L.a)(C.a.mark((function t(a){var r,n,c;return C.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"FILE_UPLOAD_REQUEST"}),t.prev=1,(r=new FormData).append("media",e),t.next=6,A.post("/upload",r);case 6:n=t.sent,c=n.data,a(V(c)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),a({type:"FILE_UPLOAD_ERROR",payload:{error:t.t0}});case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()}(a)),p.current.value=""}},n.a.createElement("div",{className:"custom-file mt-2"},n.a.createElement("input",{ref:p,type:"file",className:"custom-file-input",onChange:function(){},required:!0}),n.a.createElement("label",{className:"custom-file-label"},"Choose file")),n.a.createElement("button",{className:"btn btn-primary btn-block mt-2"},"Upload"))),n.a.createElement("div",{className:"mt-2 mr-2"},n.a.createElement("button",{onClick:function(){E(P())},className:"btn btn-secondary float-right"},"Logout"))),n.a.createElement("div",{className:"containner"},n.a.createElement("div",{className:"BlockFirst"},n.a.createElement(z,null))),m&&n.a.createElement(W,null))},Z=function(){return n.a.createElement("div",{className:"page-wrap d-flex flex-row align-items-center"},n.a.createElement("div",{className:"container"},n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-md-12 text-center"},n.a.createElement("span",{className:"display-1 d-block"},"404"),n.a.createElement("div",{className:"mb-4 lead"},"The page you are looking for was not found."),n.a.createElement(h.b,{to:"/",className:"btn btn-link"},"Back to Home")))))},$=function(e){var t=e.path,a=e.component;return null===Object(s.c)((function(e){return e.auth.list})).token?n.a.createElement(k.b,{exact:!0,path:t,component:a}):n.a.createElement(k.a,{to:"/dashboard"})},ee=function(){return n.a.createElement(h.a,null,n.a.createElement(k.d,null,n.a.createElement($,{exact:!0,path:"/",component:w}),n.a.createElement($,{exact:!0,path:"/register",component:q}),n.a.createElement($,{exact:!0,path:"/login",component:B}),n.a.createElement(J,{path:"/dashboard",component:Y}),n.a.createElement(k.b,{path:"*",component:Z})))};l.a.render(n.a.createElement(s.a,{store:v},n.a.createElement(ee,null)),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.d323effb.chunk.js.map